<!doctype html>
<html lang="es-CO">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clase de prueba (CP) · Musicala</title>
  <meta name="color-scheme" content="light" />
  <meta name="theme-color" content="#ffffff" />
  <link rel="stylesheet" href="cp.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;800;900&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="badge">CP</div>
        <div>
          <h1>Clase de prueba</h1>
          <p>Solo: <b>fecha</b> + <b>estudiante</b> (seleccionado de la lista). El resto se completa solo.</p>
        </div>
      </div>

      <div class="actions">
        <button type="button" class="btn ghost" id="btnTestMeta" title="Abrir META en una pestaña">Probar META</button>
        <div id="status" class="status">Cargando listas…</div>
      </div>
    </header>

    <main class="card">
      <form id="formCP" autocomplete="off">
        <div class="grid">
          <label class="field">
            <span>Fecha</span>
            <input id="fechaPago" name="fechaPago" type="date" required />
          </label>

          <label class="field">
            <span>Estudiante</span>

            <!-- Combo con filtro (obligatorio desde lista) -->
            <div class="combo">
              <input id="studentSearch" type="text" placeholder="Empieza a escribir…" autocomplete="off" required />
              <button id="studentClear" type="button" class="comboClear" title="Borrar">×</button>
              <div id="studentList" class="comboList" role="listbox" aria-label="Lista de estudiantes"></div>
            </div>

            <small class="mini">Debe quedar seleccionado de la lista. Si no seleccionas, no guarda.</small>

            <!-- Valor final (exacto) -->
            <input type="hidden" id="estudiante" name="estudiante" />
          </label>
        </div>

        <div class="hint">
          Se registrará como: <b>Musicala Cortesía CP</b> · Comentario: <b>Clase de prueba (CP)</b>
        </div>

        <div class="footer">
          <button id="btnGuardar" type="submit" class="btn primary" disabled>
            Guardar clase de prueba
          </button>
          <button id="btnNuevo" type="button" class="btn ghost" disabled>
            Nuevo
          </button>
        </div>

        <!-- internos -->
        <input type="hidden" id="tipoEstudiante" />
        <input type="hidden" id="medioPago" />
      </form>
    </main>

    <div id="toast" class="toast" aria-live="polite"></div>
  </div>

  <script src="cp.js"></script>
</body>
</html>
